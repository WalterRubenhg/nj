<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Cancionero YouTube</title>
<style>
body { font-family: Arial; text-align:center; background:#f5f5f5; margin:0; }
h1 { color:#2c3e50; margin:20px; }
#buscador { margin:10px auto; padding:10px; width:60%; font-size:16px; border-radius:8px; border:1px solid #ccc; }
.cancion { background:white; margin:10px auto; padding:15px; border-radius:10px; width:80%; cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,0.2); transition:0.2s; }
.cancion:hover { background:#eaf4ff; }
.titulo { font-size:20px; font-weight:bold; color:#2980b9; }
.letra { white-space: pre-wrap; font-weight:bold; font-size:22px; line-height:1.6; text-align:center; margin-top:20px; }
#detalle { display:none; padding:20px; }
#volver { margin-top:20px; padding:10px 20px; font-size:16px; border:none; border-radius:8px; background:#2980b9; color:white; cursor:pointer; }
#volver:hover { background:#1a5f91; }
.botonTutorial { margin:5px; padding:10px 15px; font-size:16px; border-radius:8px; border:none; cursor:pointer; background:#e67e22; color:white; }
.botonTutorial:hover { background:#d35400; }

/* Modal */
.modal { display:none; position:fixed; z-index:999; left:0; top:0; width:100%; height:100%; overflow:auto; background-color:rgba(0,0,0,0.7); }
.modal-content { background-color:#fefefe; margin:10% auto; padding:0; border-radius:10px; width:80%; max-width:800px; position:relative; }
.modal iframe { width:100%; height:450px; border:none; border-radius:10px 10px 0 0; }
.close { color:white; position:absolute; top:10px; right:20px; font-size:30px; font-weight:bold; cursor:pointer; }
.close:hover { color:#ccc; }
</style>
</head>
<body>

<h1>ðŸ“– ya dioooo </h1>
<input type="text" id="buscador" placeholder="ðŸ”Ž Buscar canciÃ³n...">
<div id="lista"></div>

<div id="detalle">
  <h2 id="tituloCancion"></h2>

  <!-- Botones arriba de la letra -->
  <div class="tutorial">
    <button class="botonTutorial" id="btnTeclado">Teclado</button>
    <button class="botonTutorial" id="btnBateria">BaterÃ­a</button>
    <button class="botonTutorial" id="btnGuitarra">Guitarra</button>
    <button class="botonTutorial" id="btnMusica">Reproducir CanciÃ³n</button>
  </div>

  <div id="letraCancion" class="letra"></div>
  <button id="volver">â¬… Volver</button>
</div>

<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <iframe id="iframeModal" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>
</div>

<script>
  let canciones=[], listaFiltrada=[];
  const URL_JSON="https://walterrubenhg.github.io/nj/canciones.json?nocache=" + Date.now();
  
  // Cargar JSON y manejar versiÃ³n
  fetch(URL_JSON)
  .then(res=>res.json())
  .then(data=>{
    const localVersion=parseInt(localStorage.getItem("version"))||0;
    if(data.version>localVersion){
      canciones=data.canciones;
      localStorage.setItem("canciones", JSON.stringify(data.canciones));
      localStorage.setItem("version", data.version);
    } else {
      let guardadas=localStorage.getItem("canciones");
      canciones=guardadas?JSON.parse(guardadas):data.canciones;
    }
    actualizarLista();
  })
  .catch(()=>{
    let guardadas=localStorage.getItem("canciones");
    canciones=guardadas?JSON.parse(guardadas):[];
    actualizarLista();
  });
  
  function actualizarLista(){
    const texto=document.getElementById("buscador").value.toLowerCase();
    listaFiltrada=canciones.filter(c=>c.titulo.toLowerCase().includes(texto)||c.letra.toLowerCase().includes(texto));
    listaFiltrada.sort((a,b)=>a.titulo.localeCompare(b.titulo));
    const cont=document.getElementById("lista");
    cont.innerHTML="";
    listaFiltrada.forEach(c=>{
      const div=document.createElement("div");
      div.className="cancion";
      div.innerHTML=`<div class="titulo">${c.titulo}</div>`;
      div.onclick=()=>mostrarDetalle(c);
      cont.appendChild(div);
    });
  }
  
  function mostrarDetalle(c){
    document.getElementById("lista").style.display="none";
    document.getElementById("buscador").style.display="none";
    document.getElementById("detalle").style.display="block";
    document.getElementById("tituloCancion").textContent=c.titulo;
  
    // Mostrar la letra respetando saltos de lÃ­nea y espacios
    document.getElementById("letraCancion").textContent=c.letra;
  
    const modal=document.getElementById("modal");
    const iframe=document.getElementById("iframeModal");
    const close=document.getElementsByClassName("close")[0];
  
    document.getElementById("btnTeclado").onclick=()=>{iframe.src=c.tutorial.teclado; modal.style.display="block";};
    document.getElementById("btnBateria").onclick=()=>{iframe.src=c.tutorial.bateria; modal.style.display="block";};
    document.getElementById("btnGuitarra").onclick=()=>{iframe.src=c.tutorial.guitarra; modal.style.display="block";};
    document.getElementById("btnMusica").onclick=()=>{iframe.src=c.audio; modal.style.display="block";};
  
    close.onclick=()=>{iframe.src=""; modal.style.display="none";};
    window.onclick=(event)=>{if(event.target==modal){iframe.src=""; modal.style.display="none";}};
  }
  
  document.getElementById("volver").onclick=()=>{
    document.getElementById("detalle").style.display="none";
    document.getElementById("lista").style.display="block";
    document.getElementById("buscador").style.display="inline-block";
  }
  
  document.getElementById("buscador").addEventListener("input", actualizarLista);
  </script>
  

</body>
</html>



